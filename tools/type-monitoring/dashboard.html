<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Type System Health Dashboard - BTCStampsExplorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .status-indicator {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 25px;
            font-weight: bold;
            margin: 0 10px;
            animation: pulse 2s infinite;
        }

        .status-healthy { background: #4caf50; }
        .status-warning { background: #ff9800; }
        .status-critical { background: #f44336; }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
        }

        .metric-card h3 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #ffd700;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .metric-trend {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .trend-up { color: #4caf50; }
        .trend-down { color: #f44336; }
        .trend-stable { color: #2196f3; }

        .chart-container {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .chart-container h3 {
            color: #ffd700;
            margin-bottom: 20px;
        }

        .chart-placeholder {
            height: 300px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            opacity: 0.7;
        }

        .alerts-section {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .alert-item {
            background: rgba(244, 67, 54, 0.2);
            border-left: 4px solid #f44336;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
        }

        .alert-timestamp {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .symphony-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #1e3c72;
            padding: 15px 20px;
            border-radius: 25px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3); }
            50% { box-shadow: 0 8px 25px rgba(255, 215, 0, 0.6); }
            100% { box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3); }
        }

        .refresh-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
            transition: all 0.3s ease;
        }

        .refresh-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.5);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="symphony-indicator">
        üéº FINALE SYMPHONY ACTIVE
    </div>

    <div class="container">
        <div class="header">
            <h1>Type System Health Dashboard</h1>
            <p>Real-Time Monitoring for Type Domain Migration</p>
            <div>
                <span class="status-indicator status-healthy" id="systemStatus">HEALTHY</span>
                <span id="lastUpdate">Last Update: Loading...</span>
            </div>
        </div>

        <div class="dashboard-grid">
            <div class="metric-card">
                <h3>üéØ Success Rate</h3>
                <div class="metric-value" id="successRate">---%</div>
                <div class="metric-trend trend-stable" id="successTrend">Stable</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="successProgress" style="width: 0%"></div>
                </div>
            </div>

            <div class="metric-card">
                <h3>‚ö° Avg Check Time</h3>
                <div class="metric-value" id="avgCheckTime">---ms</div>
                <div class="metric-trend trend-stable" id="timeTrend">Stable</div>
            </div>

            <div class="metric-card">
                <h3>üìÅ Files Monitored</h3>
                <div class="metric-value" id="filesChecked">---</div>
                <div class="metric-trend trend-up" id="filesTrend">Active Monitoring</div>
            </div>

            <div class="metric-card">
                <h3>üß† Memory Usage</h3>
                <div class="metric-value" id="memoryUsage">---MB</div>
                <div class="metric-trend trend-stable" id="memoryTrend">Stable</div>
            </div>

            <div class="metric-card">
                <h3>‚ùå Error Count</h3>
                <div class="metric-value" id="errorCount">---</div>
                <div class="metric-trend trend-down" id="errorTrend">Decreasing</div>
            </div>

            <div class="metric-card">
                <h3>‚ö†Ô∏è Warning Count</h3>
                <div class="metric-value" id="warningCount">---</div>
                <div class="metric-trend trend-down" id="warningTrend">Decreasing</div>
            </div>
        </div>

        <div class="chart-container">
            <h3>üìä Type Check Performance Over Time</h3>
            <div class="chart-placeholder">
                Real-time performance chart will be displayed here
                <br>Chart.js integration ready for deployment
            </div>
        </div>

        <div class="chart-container">
            <h3>üîç Import Resolution Health</h3>
            <div class="chart-placeholder">
                Import map health visualization
                <br>Dependency graph analysis ready
            </div>
        </div>

        <div class="alerts-section">
            <h3>üö® Active Alerts</h3>
            <div id="alertsContainer">
                <div class="alert-item">
                    <div class="alert-timestamp">System Initialization</div>
                    <div>Real-Time Type Monitoring System is now active and monitoring for regressions.</div>
                </div>
            </div>
        </div>
    </div>

    <button class="refresh-button" onclick="refreshData()" title="Refresh Data">
        üîÑ
    </button>

    <script>
        class TypeSystemDashboard {
            constructor() {
                this.lastUpdateTime = Date.now();
                this.monitoringActive = true;
                this.init();
            }

            init() {
                this.startAutoRefresh();
                this.loadInitialData();
                console.log('üéº Type System Dashboard initialized');
            }

            async loadInitialData() {
                // Simulate loading data - in production this would fetch from the monitoring API
                this.updateMetrics({
                    successRate: 98.5,
                    averageCheckTime: 1250,
                    filesChecked: 156,
                    memoryUsage: 45.2,
                    errorCount: 2,
                    warningCount: 5
                });

                this.updateStatus('HEALTHY');
                this.updateLastUpdate();
            }

            updateMetrics(data) {
                document.getElementById('successRate').textContent = `${data.successRate.toFixed(1)}%`;
                document.getElementById('successProgress').style.width = `${data.successRate}%`;
                
                document.getElementById('avgCheckTime').textContent = `${data.averageCheckTime.toFixed(0)}ms`;
                document.getElementById('filesChecked').textContent = data.filesChecked;
                document.getElementById('memoryUsage').textContent = `${data.memoryUsage.toFixed(1)}MB`;
                document.getElementById('errorCount').textContent = data.errorCount;
                document.getElementById('warningCount').textContent = data.warningCount;

                // Update status based on metrics
                if (data.successRate < 95 || data.errorCount > 5) {
                    this.updateStatus('CRITICAL');
                } else if (data.successRate < 98 || data.warningCount > 10) {
                    this.updateStatus('WARNING');
                } else {
                    this.updateStatus('HEALTHY');
                }
            }

            updateStatus(status) {
                const statusElement = document.getElementById('systemStatus');
                statusElement.textContent = status;
                statusElement.className = `status-indicator status-${status.toLowerCase()}`;
            }

            updateLastUpdate() {
                const now = new Date();
                document.getElementById('lastUpdate').textContent = 
                    `Last Update: ${now.toLocaleTimeString()}`;
            }

            startAutoRefresh() {
                setInterval(() => {
                    this.refreshData();
                }, 30000); // Refresh every 30 seconds
            }

            async refreshData() {
                try {
                    // In production, this would fetch from the real-time monitoring API
                    // For now, simulate data updates
                    const simulatedData = {
                        successRate: 97.8 + (Math.random() * 2),
                        averageCheckTime: 1100 + (Math.random() * 500),
                        filesChecked: 156 + Math.floor(Math.random() * 10),
                        memoryUsage: 42 + (Math.random() * 8),
                        errorCount: Math.floor(Math.random() * 3),
                        warningCount: Math.floor(Math.random() * 8)
                    };

                    this.updateMetrics(simulatedData);
                    this.updateLastUpdate();
                    
                    console.log('üìä Dashboard data refreshed');
                } catch (error) {
                    console.error('‚ùå Failed to refresh data:', error);
                }
            }

            addAlert(message, type = 'warning') {
                const alertsContainer = document.getElementById('alertsContainer');
                const alertElement = document.createElement('div');
                alertElement.className = 'alert-item';
                
                const timestamp = new Date().toLocaleString();
                alertElement.innerHTML = `
                    <div class="alert-timestamp">${timestamp}</div>
                    <div>${message}</div>
                `;
                
                alertsContainer.prepend(alertElement);
                
                // Keep only last 10 alerts
                const alerts = alertsContainer.children;
                if (alerts.length > 10) {
                    alertsContainer.removeChild(alerts[alerts.length - 1]);
                }
            }
        }

        // Global functions for external access
        let dashboard;

        function refreshData() {
            if (dashboard) {
                dashboard.refreshData();
            }
        }

        function addAlert(message, type) {
            if (dashboard) {
                dashboard.addAlert(message, type);
            }
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', () => {
            dashboard = new TypeSystemDashboard();
            
            // Add some sample alerts for demonstration
            setTimeout(() => {
                dashboard.addAlert('Task 35.1 Real-Time Type Resolution Monitoring System is now active', 'info');
            }, 2000);
            
            setTimeout(() => {
                dashboard.addAlert('Import map health check system ready for deployment', 'info');
            }, 4000);
        });

        // Handle visibility change to pause/resume updates
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                console.log('üìä Dashboard paused (tab not visible)');
            } else {
                console.log('üìä Dashboard resumed');
                if (dashboard) {
                    dashboard.refreshData();
                }
            }
        });
    </script>
</body>
</html>