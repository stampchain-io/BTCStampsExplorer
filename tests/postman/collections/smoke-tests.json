{
  "info": {
    "name": "stampchain.io - Production Smoke Tests",
    "description": "Comprehensive smoke test suite for production readiness validation",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health & Monitoring Tests",
      "item": [
        {
          "name": "API Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "health"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Smoke Test: API Health Check",
                  "pm.test('Health endpoint responds with 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Health response time < 1000ms', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                  "});",
                  "",
                  "pm.test('Health response contains status', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('status');",
                  "    pm.expect(responseJson.status).to.eql('OK');",
                  "});",
                  "",
                  "// Store health check result",
                  "pm.globals.set('health_check_passed', pm.response.code === 200);"
                ]
              }
            }
          ]
        },
        {
          "name": "Internal Monitoring Endpoint",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/internal/monitoring",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "internal",
                "monitoring"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Smoke Test: Internal Monitoring",
                  "pm.test('Monitoring endpoint responds', function () {",
                  "    pm.expect([200, 401, 403]).to.include(pm.response.code);",
                  "});",
                  "",
                  "pm.test('Monitoring response time < 2000ms', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "// If accessible, validate response structure",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Monitoring response has system info', function () {",
                  "        const responseJson = pm.response.json();",
                  "        pm.expect(responseJson).to.be.an('object');",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Critical SRC20 API Tests",
      "item": [
        {
          "name": "SRC20 Balance v2.2 - Smoke Test",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Version",
                "value": "2.2"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v2/src20/balance/{{test_address}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v2",
                "src20",
                "balance",
                "{{test_address}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Smoke Test: SRC20 Balance v2.2 Critical Endpoint",
                  "pm.test('SRC20 Balance v2.2 responds with 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('SRC20 Balance v2.2 response time < 2000ms', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "pm.test('SRC20 Balance v2.2 - NO market_data field (critical)', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.be.an('object');",
                  "    pm.expect(responseJson.data).to.be.an('array');",
                  "    ",
                  "    if (responseJson.data.length > 0) {",
                  "        const firstItem = responseJson.data[0];",
                  "        pm.expect(firstItem).to.not.have.property('market_data', 'v2.2 MUST NOT have market_data field');",
                  "    }",
                  "});",
                  "",
                  "pm.test('SRC20 Balance v2.2 has required structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.include.all.keys('last_block', 'data');",
                  "    pm.expect(responseJson.last_block).to.be.a('number');",
                  "    pm.expect(responseJson.data).to.be.an('array');",
                  "});",
                  "",
                  "// Store test results for reporting",
                  "pm.globals.set('src20_balance_v2_2_passed', pm.response.code === 200);"
                ]
              }
            }
          ]
        },
        {
          "name": "SRC20 Balance v2.3 - Smoke Test",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Version",
                "value": "2.3"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v2/src20/balance/{{test_address}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v2",
                "src20",
                "balance",
                "{{test_address}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Smoke Test: SRC20 Balance v2.3 Critical Endpoint",
                  "pm.test('SRC20 Balance v2.3 responds with 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('SRC20 Balance v2.3 response time < 2000ms', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "pm.test('SRC20 Balance v2.3 - HAS market_data field (critical)', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.be.an('object');",
                  "    pm.expect(responseJson.data).to.be.an('array');",
                  "    ",
                  "    if (responseJson.data.length > 0) {",
                  "        const firstItem = responseJson.data[0];",
                  "        pm.expect(firstItem, 'v2.3 MUST have market_data field').to.have.property('market_data');",
                  "        ",
                  "        // market_data can be null or object",
                  "        const marketData = firstItem.market_data;",
                  "        pm.expect([null, 'object']).to.include(typeof marketData);",
                  "    }",
                  "});",
                  "",
                  "pm.test('SRC20 Balance v2.3 has required structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.include.all.keys('last_block', 'data');",
                  "    pm.expect(responseJson.last_block).to.be.a('number');",
                  "    pm.expect(responseJson.data).to.be.an('array');",
                  "});",
                  "",
                  "// Store test results for reporting",
                  "pm.globals.set('src20_balance_v2_3_passed', pm.response.code === 200);"
                ]
              }
            }
          ]
        },
        {
          "name": "SRC20 Overview - Smoke Test",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Version",
                "value": "2.3"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v2/src20?limit=5",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v2",
                "src20"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "5"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Smoke Test: SRC20 Overview Critical Endpoint",
                  "pm.test('SRC20 Overview responds with 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('SRC20 Overview response time < 3000ms', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "",
                  "pm.test('SRC20 Overview has data structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.be.an('object');",
                  "    pm.expect(responseJson.data).to.be.an('array');",
                  "    pm.expect(responseJson.total).to.be.a('number');",
                  "});",
                  "",
                  "pm.test('SRC20 Overview returns data', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.data.length).to.be.above(0, 'Should return at least 1 SRC20 token');",
                  "});",
                  "",
                  "// Store test results for reporting",
                  "pm.globals.set('src20_overview_passed', pm.response.code === 200);"
                ]
              }
            }
          ]
        },
        {
          "name": "SRC20 Deploy Enhanced Fields - Smoke Test",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Version",
                "value": "2.3"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v2/src20?op=deploy&limit=3&includeMarketData=true",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v2",
                "src20"
              ],
              "query": [
                {
                  "key": "op",
                  "value": "deploy"
                },
                {
                  "key": "limit",
                  "value": "3"
                },
                {
                  "key": "includeMarketData",
                  "value": "true"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Smoke Test: SRC20 Deploy Enhanced Fields Critical Validation",
                  "pm.test('SRC20 Deploy Enhanced responds with 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('SRC20 Deploy Enhanced response time < 3000ms', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "",
                  "pm.test('SRC20 Deploy Enhanced has required structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.be.an('object');",
                  "    pm.expect(responseJson.data).to.be.an('array');",
                  "    pm.expect(responseJson.total).to.be.a('number');",
                  "    pm.expect(responseJson.last_block).to.be.a('number');",
                  "});",
                  "",
                  "pm.test('SRC20 Deploy Enhanced - CRITICAL: stamp_url field validation', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.data.length).to.be.above(0, 'Should return at least 1 deploy operation');",
                  "    ",
                  "    const firstItem = responseJson.data[0];",
                  "    pm.expect(firstItem, 'stamp_url field MUST exist').to.have.property('stamp_url');",
                  "    pm.expect(firstItem.stamp_url).to.be.a('string');",
                  "    ",
                  "    // Validate stamp_url format: https://stampchain.io/stamps/{tx_hash}.svg",
                  "    const stampUrlPattern = /^https:\\/\\/stampchain\\.io\\/stamps\\/[a-f0-9]{64}\\.svg$/;",
                  "    pm.expect(firstItem.stamp_url).to.match(stampUrlPattern, 'stamp_url must match pattern https://stampchain.io/stamps/{64-char-hex}.svg');",
                  "});",
                  "",
                  "pm.test('SRC20 Deploy Enhanced - CRITICAL: deploy_img field validation', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const firstItem = responseJson.data[0];",
                  "    ",
                  "    pm.expect(firstItem, 'deploy_img field MUST exist').to.have.property('deploy_img');",
                  "    pm.expect(firstItem.deploy_img).to.be.a('string');",
                  "    ",
                  "    // Validate deploy_img format: https://stampchain.io/stamps/{deploy_tx}.svg",
                  "    const deployImgPattern = /^https:\\/\\/stampchain\\.io\\/stamps\\/[a-f0-9]{64}\\.svg$/;",
                  "    pm.expect(firstItem.deploy_img).to.match(deployImgPattern, 'deploy_img must match pattern https://stampchain.io/stamps/{64-char-hex}.svg');",
                  "});",
                  "",
                  "pm.test('SRC20 Deploy Enhanced - CRITICAL: deploy_tx field validation', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const firstItem = responseJson.data[0];",
                  "    ",
                  "    pm.expect(firstItem, 'deploy_tx field MUST exist').to.have.property('deploy_tx');",
                  "    pm.expect(firstItem.deploy_tx).to.be.a('string');",
                  "    ",
                  "    // Validate deploy_tx format: 64-character hex string",
                  "    const deployTxPattern = /^[a-f0-9]{64}$/;",
                  "    pm.expect(firstItem.deploy_tx).to.match(deployTxPattern, 'deploy_tx must be 64-character hex string');",
                  "});",
                  "",
                  "pm.test('SRC20 Deploy Enhanced - URL consistency validation', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const firstItem = responseJson.data[0];",
                  "    ",
                  "    // Extract tx_hash from stamp_url",
                  "    const stampUrlMatch = firstItem.stamp_url.match(/\\/stamps\\/([a-f0-9]{64})\\.svg$/);",
                  "    pm.expect(stampUrlMatch).to.not.be.null;",
                  "    const stampUrlTxHash = stampUrlMatch[1];",
                  "    ",
                  "    // Extract deploy_tx from deploy_img",
                  "    const deployImgMatch = firstItem.deploy_img.match(/\\/stamps\\/([a-f0-9]{64})\\.svg$/);",
                  "    pm.expect(deployImgMatch).to.not.be.null;",
                  "    const deployImgTxHash = deployImgMatch[1];",
                  "    ",
                  "    // For deploy operations, stamp_url should use tx_hash, deploy_img should use deploy_tx",
                  "    pm.expect(stampUrlTxHash).to.equal(firstItem.tx_hash, 'stamp_url should contain tx_hash');",
                  "    pm.expect(deployImgTxHash).to.equal(firstItem.deploy_tx, 'deploy_img should contain deploy_tx');",
                  "});",
                  "",
                  "pm.test('SRC20 Deploy Enhanced - Market data structure validation', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const firstItem = responseJson.data[0];",
                  "    ",
                  "    pm.expect(firstItem, 'market_data field MUST exist for v2.3').to.have.property('market_data');",
                  "    ",
                  "    if (firstItem.market_data !== null) {",
                  "        pm.expect(firstItem.market_data).to.be.an('object');",
                  "        pm.expect(firstItem.market_data).to.have.property('holder_count');",
                  "        pm.expect(firstItem.market_data).to.have.property('market_cap_btc');",
                  "        pm.expect(firstItem.market_data).to.have.property('price_btc');",
                  "    }",
                  "});",
                  "",
                  "pm.test('SRC20 Deploy Enhanced - Mint progress structure validation', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const firstItem = responseJson.data[0];",
                  "    ",
                  "    pm.expect(firstItem, 'mint_progress field MUST exist for v2.3').to.have.property('mint_progress');",
                  "    ",
                  "    if (firstItem.mint_progress !== null) {",
                  "        pm.expect(firstItem.mint_progress).to.be.an('object');",
                  "        pm.expect(firstItem.mint_progress).to.have.property('progress');",
                  "        pm.expect(firstItem.mint_progress).to.have.property('current');",
                  "        pm.expect(firstItem.mint_progress).to.have.property('max');",
                  "        pm.expect(firstItem.mint_progress).to.have.property('total_mints');",
                  "    }",
                  "});",
                  "",
                  "// Store test results for reporting",
                  "pm.globals.set('src20_deploy_enhanced_passed', pm.response.code === 200);"
                ]
              }
            }
          ]
        },
        {
          "name": "Stamps with Cursed Filter (Alternative to Deprecated Cursed Endpoint)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Stamps with cursed filter responds', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Stamps cursed filter response time acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(5000);",
                  "});",
                  "",
                  "pm.test('Stamps cursed filter has required structure', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('data');",
                  "    pm.expect(response).to.have.property('page');",
                  "    pm.expect(response).to.have.property('limit');",
                  "    pm.expect(response).to.have.property('total');",
                  "});",
                  "",
                  "pm.test('Stamps cursed filter returns cursed stamps only', function () {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        response.data.forEach(function(stamp) {",
                  "            pm.expect(stamp).to.have.property('stamp');",
                  "            pm.expect(stamp.stamp).to.be.below(0);",
                  "        });",
                  "    }",
                  "});",
                  "",
                  "pm.test('Stamps cursed filter equivalent to deprecated cursed endpoint', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.deprecated).to.not.exist;",
                  "    pm.expect(response.data).to.be.an('array');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Version",
                "value": "2.3"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v2/stamps?type=cursed&limit=3",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v2",
                "stamps"
              ],
              "query": [
                {
                  "key": "type",
                  "value": "cursed"
                },
                {
                  "key": "limit",
                  "value": "3"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Stamp Preview API Tests",
      "item": [
        {
          "name": "Preview - Image Stamp (PNG)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v2/stamp/37687/preview",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v2",
                "stamp",
                "37687",
                "preview"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Smoke Test: Preview endpoint for image stamp",
                  "pm.test('Preview image stamp returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Preview image stamp response time < 10000ms', function () {",
                  "    // First render may be slow; cached renders are fast",
                  "    pm.expect(pm.response.responseTime).to.be.below(10000);",
                  "});",
                  "",
                  "pm.test('Preview image stamp returns PNG content type', function () {",
                  "    pm.expect(pm.response.headers.get('Content-Type')).to.include('image/png');",
                  "});",
                  "",
                  "pm.test('Preview image stamp has non-empty body', function () {",
                  "    pm.expect(pm.response.size().body).to.be.above(0);",
                  "});",
                  "",
                  "pm.test('Preview image stamp has caching headers', function () {",
                  "    const cacheControl = pm.response.headers.get('Cache-Control');",
                  "    pm.expect(cacheControl).to.exist;",
                  "    pm.expect(cacheControl).to.include('public');",
                  "});",
                  "",
                  "pm.test('Preview image stamp has conversion metadata', function () {",
                  "    const conversionMethod = pm.response.headers.get('X-Conversion-Method');",
                  "    pm.expect(conversionMethod).to.exist;",
                  "    pm.expect(conversionMethod).to.be.a('string');",
                  "});",
                  "",
                  "// Store test result",
                  "pm.globals.set('preview_image_stamp_passed', pm.response.code === 200);"
                ]
              }
            }
          ]
        },
        {
          "name": "Preview - HTML Stamp",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v2/stamp/1054189/preview",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v2",
                "stamp",
                "1054189",
                "preview"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Smoke Test: Preview endpoint for HTML stamp",
                  "// HTML stamps require Chrome rendering; may 302 to fallback if Chrome unavailable",
                  "pm.test('Preview HTML stamp responds with 200 or 302', function () {",
                  "    pm.expect([200, 302]).to.include(pm.response.code);",
                  "});",
                  "",
                  "pm.test('Preview HTML stamp response time < 15000ms', function () {",
                  "    // HTML rendering via Chrome is slower than image upscaling",
                  "    pm.expect(pm.response.responseTime).to.be.below(15000);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Preview HTML stamp returns PNG content type', function () {",
                  "        pm.expect(pm.response.headers.get('Content-Type')).to.include('image/png');",
                  "    });",
                  "",
                  "    pm.test('Preview HTML stamp has non-empty body', function () {",
                  "        pm.expect(pm.response.size().body).to.be.above(0);",
                  "    });",
                  "",
                  "    pm.test('Preview HTML stamp has caching headers', function () {",
                  "        const cacheControl = pm.response.headers.get('Cache-Control');",
                  "        pm.expect(cacheControl).to.exist;",
                  "        pm.expect(cacheControl).to.include('public');",
                  "    });",
                  "}",
                  "",
                  "if (pm.response.code === 302) {",
                  "    pm.test('Preview HTML stamp 302 redirects to fallback', function () {",
                  "        const location = pm.response.headers.get('Location');",
                  "        pm.expect(location).to.exist;",
                  "        pm.expect(location).to.include('stampchain');",
                  "    });",
                  "}",
                  "",
                  "// Store test result (both 200 and 302 are acceptable)",
                  "pm.globals.set('preview_html_stamp_passed', [200, 302].includes(pm.response.code));"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "OG Tag & Social Meta Tests",
      "item": [
        {
          "name": "Stamp Detail Page - OG Tags (Image Stamp)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "text/html"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/stamp/37687",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "stamp",
                "37687"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Smoke Test: OG tags on stamp detail page",
                  "pm.test('Stamp detail page returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Stamp detail page response time < 5000ms', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(5000);",
                  "});",
                  "",
                  "pm.test('Stamp detail page returns HTML', function () {",
                  "    pm.expect(pm.response.headers.get('Content-Type')).to.include('text/html');",
                  "});",
                  "",
                  "const body = pm.response.text();",
                  "",
                  "pm.test('Stamp detail page has og:image meta tag', function () {",
                  "    pm.expect(body).to.include('og:image');",
                  "    // og:image should point to the preview endpoint",
                  "    pm.expect(body).to.match(/og:image[^>]*content=\"[^\"]*\\/api\\/v2\\/stamp\\/37687\\/preview\"/);",
                  "});",
                  "",
                  "pm.test('Stamp detail page has twitter:card set to summary_large_image', function () {",
                  "    pm.expect(body).to.include('twitter:card');",
                  "    pm.expect(body).to.match(/twitter:card[^>]*content=\"summary_large_image\"/);",
                  "});",
                  "",
                  "pm.test('Stamp detail page has twitter:image meta tag', function () {",
                  "    pm.expect(body).to.include('twitter:image');",
                  "    pm.expect(body).to.match(/twitter:image[^>]*content=\"[^\"]*\\/api\\/v2\\/stamp\\/37687\\/preview\"/);",
                  "});",
                  "",
                  "pm.test('Stamp detail page has og:image:width and og:image:height', function () {",
                  "    pm.expect(body).to.match(/og:image:width[^>]*content=\"1200\"/);",
                  "    pm.expect(body).to.match(/og:image:height[^>]*content=\"1200\"/);",
                  "});",
                  "",
                  "pm.test('Stamp detail page has og:title', function () {",
                  "    pm.expect(body).to.include('og:title');",
                  "});",
                  "",
                  "// Store test result",
                  "pm.globals.set('og_tags_image_stamp_passed', pm.response.code === 200);"
                ]
              }
            }
          ]
        },
        {
          "name": "Stamp Detail Page - OG Tags (HTML Stamp)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "text/html"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/stamp/1054189",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "stamp",
                "1054189"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Smoke Test: OG tags on HTML stamp detail page",
                  "pm.test('HTML stamp detail page returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('HTML stamp detail page response time < 5000ms', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(5000);",
                  "});",
                  "",
                  "const body = pm.response.text();",
                  "",
                  "pm.test('HTML stamp detail page has og:image pointing to preview', function () {",
                  "    pm.expect(body).to.include('og:image');",
                  "    pm.expect(body).to.match(/og:image[^>]*content=\"[^\"]*\\/api\\/v2\\/stamp\\/1054189\\/preview\"/);",
                  "});",
                  "",
                  "pm.test('HTML stamp detail page has twitter:card summary_large_image', function () {",
                  "    pm.expect(body).to.include('twitter:card');",
                  "    pm.expect(body).to.match(/twitter:card[^>]*content=\"summary_large_image\"/);",
                  "});",
                  "",
                  "pm.test('HTML stamp detail page has twitter:image pointing to preview', function () {",
                  "    pm.expect(body).to.include('twitter:image');",
                  "    pm.expect(body).to.match(/twitter:image[^>]*content=\"[^\"]*\\/api\\/v2\\/stamp\\/1054189\\/preview\"/);",
                  "});",
                  "",
                  "// Store test result",
                  "pm.globals.set('og_tags_html_stamp_passed', pm.response.code === 200);"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Database Connectivity Tests",
      "item": [
        {
          "name": "Database Connection - Via SRC20 Query",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v2/src20?limit=1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v2",
                "src20"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "1"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Smoke Test: Database Connectivity",
                  "pm.test('Database query successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Database response time < 3000ms', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "",
                  "pm.test('Database returns valid data structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.be.an('object');",
                  "    pm.expect(responseJson).to.have.property('data');",
                  "    pm.expect(responseJson).to.have.property('total');",
                  "});",
                  "",
                  "// Store database connectivity result",
                  "pm.globals.set('database_connectivity_passed', pm.response.code === 200);"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Performance Threshold Tests",
      "item": [
        {
          "name": "Critical Endpoints Performance Summary",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "health"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// SMOKE TEST SUITE RESULTS SUMMARY",
                  "",
                  "// Collect all test results",
                  "const healthPassed = !!pm.globals.get('health_check_passed');",
                  "const src20v22Passed = !!pm.globals.get('src20_balance_v2_2_passed');",
                  "const src20v23Passed = !!pm.globals.get('src20_balance_v2_3_passed');",
                  "const overviewPassed = !!pm.globals.get('src20_overview_passed');",
                  "const dbPassed = !!pm.globals.get('database_connectivity_passed');",
                  "const src20DeployEnhancedPassed = !!pm.globals.get('src20_deploy_enhanced_passed');",
                  "const previewImagePassed = !!pm.globals.get('preview_image_stamp_passed');",
                  "const previewHtmlPassed = !!pm.globals.get('preview_html_stamp_passed');",
                  "const ogTagsImagePassed = !!pm.globals.get('og_tags_image_stamp_passed');",
                  "const ogTagsHtmlPassed = !!pm.globals.get('og_tags_html_stamp_passed');",
                  "",
                  "// Calculate overall success rate",
                  "const totalTests = 10;",
                  "const passedTests = [healthPassed, src20v22Passed, src20v23Passed, overviewPassed, dbPassed, src20DeployEnhancedPassed, previewImagePassed, previewHtmlPassed, ogTagsImagePassed, ogTagsHtmlPassed]",
                  "    .filter(result => result === true).length;",
                  "const successRate = (passedTests / totalTests) * 100;",
                  "",
                  "pm.test('OVERALL SMOKE TEST SUCCESS RATE >= 80%', function () {",
                  "    pm.expect(successRate).to.be.at.least(80, ",
                  "        `Success rate: ${successRate}% (${passedTests}/${totalTests} tests passed)`);",
                  "});",
                  "",
                  "pm.test('CRITICAL: Health Check Passed', function () {",
                  "    pm.expect(healthPassed).to.be.true;",
                  "});",
                  "",
                  "pm.test('CRITICAL: Database Connectivity Passed', function () {",
                  "    pm.expect(dbPassed).to.be.true;",
                  "});",
                  "",
                  "pm.test('CRITICAL: SRC20 API v2.2/v2.3 Both Working', function () {",
                  "    pm.expect(src20v22Passed && src20v23Passed).to.be.true;",
                  "});",
                  "",
                  "pm.test('CRITICAL: SRC20 Deploy Enhanced Endpoint Working', function () {",
                  "    pm.expect(src20DeployEnhancedPassed).to.be.true;",
                  "});",
                  "",
                  "pm.test('Preview API: Image Stamp Rendering', function () {",
                  "    pm.expect(previewImagePassed).to.be.true;",
                  "});",
                  "",
                  "pm.test('Preview API: HTML Stamp Rendering', function () {",
                  "    pm.expect(previewHtmlPassed).to.be.true;",
                  "});",
                  "",
                  "pm.test('OG Tags: Stamp Detail Pages Have Social Meta', function () {",
                  "    pm.expect(ogTagsImagePassed && ogTagsHtmlPassed).to.be.true;",
                  "});",
                  "",
                  "// Log results for reporting",
                  "console.log('SMOKE TEST RESULTS SUMMARY:');",
                  "console.log(`   Health Check: ${healthPassed ? 'PASS' : 'FAIL'}`);",
                  "console.log(`   SRC20 v2.2: ${src20v22Passed ? 'PASS' : 'FAIL'}`);",
                  "console.log(`   SRC20 v2.3: ${src20v23Passed ? 'PASS' : 'FAIL'}`);",
                  "console.log(`   SRC20 Overview: ${overviewPassed ? 'PASS' : 'FAIL'}`);",
                  "console.log(`   Database: ${dbPassed ? 'PASS' : 'FAIL'}`);",
                  "console.log(`   SRC20 Deploy Enhanced: ${src20DeployEnhancedPassed ? 'PASS' : 'FAIL'}`);",
                  "console.log(`   Preview Image Stamp: ${previewImagePassed ? 'PASS' : 'FAIL'}`);",
                  "console.log(`   Preview HTML Stamp: ${previewHtmlPassed ? 'PASS' : 'FAIL'}`);",
                  "console.log(`   OG Tags Image Stamp: ${ogTagsImagePassed ? 'PASS' : 'FAIL'}`);",
                  "console.log(`   OG Tags HTML Stamp: ${ogTagsHtmlPassed ? 'PASS' : 'FAIL'}`);",
                  "console.log(`   Overall Success Rate: ${successRate}% (${passedTests}/${totalTests})`);",
                  "",
                  "// Set final result for deployment pipeline",
                  "pm.globals.set('smoke_tests_passed', successRate >= 80);",
                  "pm.globals.set('smoke_tests_success_rate', successRate);",
                  "",
                  "// Clean up initialization guard for next run"
                ]
              }
            }
          ]
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set default test values if not provided",
          "if (!pm.globals.get('test_address')) {",
          "    pm.globals.set('test_address', 'bc1qrfne7jw6fk6r8kl6dlm0ktt6rv4e5nqp5y4yny');",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://stampchain.io",
      "type": "string"
    },
    {
      "key": "test_address",
      "value": "bc1qrfne7jw6fk6r8kl6dlm0ktt6rv4e5nqp5y4yny",
      "type": "string"
    }
  ]
}